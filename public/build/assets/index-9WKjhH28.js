import{c as J,e as K,r as A,j as s,L as g,a as F,H as O}from"./app-B-1tTBzB.js";import{u as Q,A as W}from"./app-layout-AcA4QsYX.js";import{B as o}from"./button-CdeAIhWh.js";import{b as D,a as X,C as Y,d as Z,c as ee}from"./card-CT4nWOXi.js";import{c as se,T as te,a as P,b as n,d as ae,e as c}from"./table-v9Msa1nz.js";import{B as $}from"./badge-BVKIpfsD.js";import{I as re}from"./input-NwLU5jqd.js";import{f as I}from"./date-formatters-B7sLoE7Z.js";import{U as L}from"./user-DZm3cYct.js";import{E as R}from"./eye-BpSf5HYs.js";import{S as M}from"./square-pen-Cdv4cGMx.js";import{T as q}from"./trash-2-Dvu-7uMw.js";import{C as le}from"./calendar-Cg9yaziP.js";import{S as ie}from"./stethoscope-BtpI4x9i.js";import{C as ce}from"./circle-plus-0_wWMRAa.js";import{S as oe}from"./search-B6IKaY_0.js";/* empty css            */import"./index-tPtRDCGq.js";import"./index-DaH-z8Mm.js";import"./index-DPlNKk0B.js";import"./index-C-zLe_cF.js";import"./createLucideIcon-BXK2RHzG.js";import"./index-CbDHC5wl.js";import"./index-BH0NSEIh.js";import"./log-out-dgwnkcoL.js";import"./activity-Bl3eqAUz.js";import"./users-A7j-_B4j.js";import"./graduation-cap-D0BfXnZu.js";import"./clipboard-list-qhRWvK2l.js";const ne=[{title:"Dashboard",href:"/dashboard"},{title:"Utentes",href:"/utentes"}];function qe(l){const e=J.c(40),{utentes:a,filters:N}=l,r=Q(),{auth:G}=K().props,d=G.is_admin,[i,V]=A.useState(N.search||"");let v;e[0]!==N.search||e[1]!==i?(v=()=>{const t=setTimeout(()=>{i!==(N.search||"")&&F.get("/utentes",{search:i},{preserveState:!0,preserveScroll:!0,replace:!0})},500);return()=>clearTimeout(t)},e[0]=N.search,e[1]=i,e[2]=v):v=e[2];let b;e[3]!==i?(b=[i],e[3]=i,e[4]=b):b=e[4],A.useEffect(v,b);const B=xe,H=me;let w;e[5]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(O,{title:"Utentes"}),e[5]=w):w=e[5];const k=`flex flex-col gap-4 ${r?"p-4":"p-6"}`,z=`flex ${r?"flex-col gap-4":"items-center justify-between"}`,U=`${r?"text-2xl":"text-3xl"} font-bold tracking-tight`;let m;e[6]!==U?(m=s.jsx("h1",{className:U,children:"Utentes"}),e[6]=U,e[7]=m):m=e[7];let S;e[8]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx("p",{className:"text-muted-foreground",children:"Gerir os utentes do sistema"}),e[8]=S):S=e[8];let x;e[9]!==m?(x=s.jsxs("div",{children:[m,S]}),e[9]=m,e[10]=x):x=e[10];const E=r?"w-full":"";let y;e[11]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsxs(o,{className:"bg-emerald-600 hover:bg-emerald-700 w-full",children:[s.jsx(ce,{className:"mr-2 h-4 w-4"}),"Novo Utente"]}),e[11]=y):y=e[11];let h;e[12]!==E?(h=s.jsx(g,{href:"/utentes/create",className:E,children:y}),e[12]=E,e[13]=h):h=e[13];let f;e[14]!==h||e[15]!==z||e[16]!==x?(f=s.jsxs("div",{className:z,children:[x,h]}),e[14]=h,e[15]=z,e[16]=x,e[17]=f):f=e[17];let T;e[18]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(oe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e[18]=T):T=e[18];let C;e[19]===Symbol.for("react.memo_cache_sentinel")?(C=t=>V(t.target.value),e[19]=C):C=e[19];let j;e[20]!==i?(j=s.jsx("div",{className:"mb-2",children:s.jsxs("div",{className:"relative",children:[T,s.jsx(re,{placeholder:"Pesquisar por nome ou processo...",className:"pl-8",value:i,onChange:C})]})}),e[20]=i,e[21]=j):j=e[21];let p;e[22]!==d||e[23]!==r||e[24]!==a.data||e[25]!==a.total?(p=r?s.jsx("div",{className:"flex flex-col gap-4",children:a.data.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center bg-card rounded-lg border border-dashed",children:[s.jsx(L,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Nenhum utente encontrado"})]}):a.data.map(t=>s.jsx(D,{className:"p-4 border-l-4 border-l-emerald-500 shadow-sm",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs($,{variant:"outline",className:"text-xs",children:["#",t.processo]}),s.jsx($,{variant:H(t.sexo),className:"text-[10px] px-1.5 py-0 h-4 uppercase",children:t.sexo})]}),s.jsx("h3",{className:"font-semibold text-lg line-clamp-1 leading-tight",children:t.nome||"Sem Nome"})]}),s.jsxs("div",{className:"flex gap-1 shrink-0 ml-2",children:[s.jsx(g,{href:`/utentes/${t.id}`,children:s.jsx(o,{variant:"ghost",size:"icon",className:"h-8 w-8 text-emerald-600",children:s.jsx(R,{className:"h-4 w-4"})})}),s.jsx(g,{href:`/utentes/${t.id}/edit`,children:s.jsx(o,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600",children:s.jsx(M,{className:"h-4 w-4"})})}),s.jsx(o,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>B(t.id,t.nome),children:s.jsx(q,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-muted-foreground border-t pt-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(le,{className:"h-4 w-4 shrink-0 text-emerald-600"}),s.jsx("span",{children:I(t.data_nascimento)})]}),s.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[s.jsx(ie,{className:"h-4 w-4 shrink-0 text-emerald-600"}),s.jsxs("span",{children:[t.registos_cirurgicos_count||0," Cirurgias"]})]}),d&&t.user&&s.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[s.jsx(L,{className:"h-4 w-4 shrink-0 text-emerald-600"}),s.jsxs("span",{children:["Registado por: ",t.user.name]})]})]})]})},t.id))}):s.jsxs(D,{children:[s.jsxs(X,{children:[s.jsx(Y,{children:"Lista de Utentes"}),s.jsxs(Z,{children:["Total de ",a.total," utentes registados"]})]}),s.jsx(ee,{children:s.jsx("div",{className:"rounded-md border",children:s.jsxs(se,{children:[s.jsx(te,{children:s.jsxs(P,{children:[s.jsx(n,{children:"Processo"}),s.jsx(n,{children:"Nome"}),s.jsx(n,{children:"Sexo"}),s.jsx(n,{children:"Data Nascimento"}),d&&s.jsx(n,{children:"Registado Por"}),s.jsx(n,{children:"Cirurgias"}),s.jsx(n,{className:"text-right",children:"Ações"})]})}),s.jsx(ae,{children:a.data.length===0?s.jsx(P,{children:s.jsx(c,{colSpan:d?7:6,className:"text-center text-muted-foreground",children:"Nenhum utente encontrado"})}):a.data.map(t=>s.jsxs(P,{children:[s.jsxs(c,{className:"font-medium",children:["#",t.processo]}),s.jsx(c,{children:t.nome||s.jsx("span",{className:"text-muted-foreground italic",children:"Sem nome"})}),s.jsx(c,{children:s.jsx($,{variant:H(t.sexo),children:t.sexo})}),s.jsx(c,{children:I(t.data_nascimento)}),d&&s.jsx(c,{children:t.user?.name||"-"}),s.jsx(c,{children:s.jsx($,{variant:"outline",children:t.registos_cirurgicos_count||0})}),s.jsx(c,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(g,{href:`/utentes/${t.id}`,children:s.jsx(o,{variant:"ghost",size:"sm",children:s.jsx(R,{className:"h-4 w-4"})})}),s.jsx(g,{href:`/utentes/${t.id}/edit`,children:s.jsx(o,{variant:"ghost",size:"sm",className:"text-blue-600",children:s.jsx(M,{className:"h-4 w-4"})})}),s.jsx(o,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>B(t.id,t.nome),children:s.jsx(q,{className:"h-4 w-4"})})]})})]},t.id))})]})})})]}),e[22]=d,e[23]=r,e[24]=a.data,e[25]=a.total,e[26]=p):p=e[26];let u;e[27]!==r||e[28]!==a.from||e[29]!==a.last_page||e[30]!==a.links||e[31]!==a.to||e[32]!==a.total?(u=a.last_page>1&&s.jsxs("div",{className:`flex ${r?"justify-center":"items-center justify-between"} py-4`,children:[!r&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["A mostrar ",a.from," a ",a.to," de ",a.total," resultados"]}),s.jsx("div",{className:"flex gap-2",children:a.links.map(de)})]}),e[27]=r,e[28]=a.from,e[29]=a.last_page,e[30]=a.links,e[31]=a.to,e[32]=a.total,e[33]=u):u=e[33];let _;return e[34]!==f||e[35]!==j||e[36]!==p||e[37]!==u||e[38]!==k?(_=s.jsxs(W,{breadcrumbs:ne,children:[w,s.jsxs("div",{className:k,children:[f,j,p,u]})]}),e[34]=f,e[35]=j,e[36]=p,e[37]=u,e[38]=k,e[39]=_):_=e[39],_}function de(l,e){return s.jsx(g,{href:l.url||"#",preserveScroll:!0,children:s.jsx(o,{variant:l.active?"default":"outline",size:"sm",disabled:!l.url,dangerouslySetInnerHTML:{__html:l.label}})},e)}function me(l){switch(l){case"Masculino":return"default";case"Feminino":return"secondary";default:return"outline"}}function xe(l,e){confirm(`Tem a certeza que deseja remover o utente "${e}"? Esta ação não pode ser revertida.`)&&F.delete(`/utentes/${l}`)}export{qe as default};
