import{c as hs,e as js,r as j,u as gs,j as s,y as Me,a as ls,H as fs}from"./app-DYw2uh2l.js";import{Q as vs,C as Ns,a as bs,A as _s}from"./react-select-DKgno2Ke.js";import{B as ds}from"./badge-CXR45Pbq.js";import{B as I}from"./button-CVSw7Wf2.js";import{b as X,a as Y,C as Z,d as ee,c as se}from"./card-CNjyr3J4.js";import{C as Ss}from"./checkbox-BLjuny_O.js";import{I as te}from"./input-BD1314Nw.js";import{L as p}from"./label-CzQRH0hy.js";import{c as S,a as y,S as C,b as A,d as f}from"./select-DF6e-Ixm.js";import{S as ms}from"./separator-B2217uNz.js";import{T as ys}from"./textarea-CODqP2TB.js";import{u as Cs,A as As}from"./app-layout-Cyj0xisr.js";import{c as us}from"./date-formatters-B7sLoE7Z.js";import{S as Ds}from"./search-D3KsJ9kV.js";import{T as Ps}from"./trash-2-DCDyTnj_.js";import{P as ws}from"./plus-DFMfjgPV.js";import{S as Fs}from"./save-C3lUqA8a.js";import{A as Rs}from"./arrow-left-GHyy9D3l.js";/* empty css            */import"./createLucideIcon-CCmQWP9M.js";import"./dialog-DKjcYCZD.js";import"./index-Cy3KL0hx.js";import"./index-DywX51Id.js";import"./index-DQSJ6aDa.js";import"./index-DD1J9XtJ.js";import"./index-DYQ83sbi.js";import"./index-B7pWeLg4.js";import"./check-RCcWXEFN.js";import"./index-CEdiHATu.js";import"./index-BH0NSEIh.js";import"./log-out-BN6G8wWW.js";import"./activity-C8zhE91u.js";import"./users-DMNRBKkK.js";import"./graduation-cap-CgRNjOkZ.js";import"./clipboard-list-qsPMKpK8.js";const N=["Utente","Registo Cirúrgico","Diagnósticos","Intervenções","Revisão e Confirmação"],ks=[{title:"Dashboard",href:"/dashboard"},{title:"Registos Cirúrgicos",href:"/registos-cirurgicos"},{title:"Criar",href:"#"}];function Rt(i){const e=hs.c(136),{tiposDeCirurgia:ie,tiposDeAbordagem:ae,diagnosticos:oe,procedimentos:re,especialidades:ne,hospitals:ce,zonaAnatomicas:le,enums:de,duplicateData:x}=i;let me;e[0]!==ie?(me=ie===void 0?[]:ie,e[0]=ie,e[1]=me):me=e[1];const D=me;let ue;e[2]!==ae?(ue=ae===void 0?[]:ae,e[2]=ae,e[3]=ue):ue=e[3];const P=ue;let pe;e[4]!==oe?(pe=oe===void 0?[]:oe,e[4]=oe,e[5]=pe):pe=e[5];const h=pe;let xe;e[6]!==re?(xe=re===void 0?[]:re,e[6]=re,e[7]=xe):xe=e[7];const J=xe;let he;e[8]!==ne?(he=ne===void 0?[]:ne,e[8]=ne,e[9]=he):he=e[9];const b=he;let je;e[10]!==ce?(je=ce===void 0?[]:ce,e[10]=ce,e[11]=je):je=e[11];const ge=je;let fe;e[12]!==le?(fe=le===void 0?[]:le,e[12]=le,e[13]=fe):fe=e[13];const Qe=fe;let ve;e[14]!==de?(ve=de===void 0?{sexo:[],funcoes:[],clavien:[],tipo_diagnostico:[]}:de,e[14]=de,e[15]=ve):ve=e[15];const w=ve,m=Cs(),{auth:Ne}=js().props,[a,Ge]=j.useState(1),[v,ps]=j.useState(x?.utente?.processo||""),[be,qe]=j.useState(null);let _e;e[16]!==x?.utente?(_e=x?.utente||{nome:"",processo:"",data_nascimento:"",sexo:""},e[16]=x?.utente,e[17]=_e):_e=e[17];const[d,F]=j.useState(_e);let Se;e[18]!==Ne||e[19]!==x?.registo?(Se=x?.registo||{hospital:Ne.user.hospital_de_origem||"",especialidade:Ne.user.especialidade||"",data_cirurgia:"",tipo_de_cirurgia_id:"",ambulatorio:!1,observacoes:"",tipo_de_abordagem_id:""},e[18]=Ne,e[19]=x?.registo,e[20]=Se):Se=e[20];const[r,_]=j.useState(Se);let ye;e[21]!==x?.diagnosticos?(ye=x?.diagnosticos||[],e[21]=x?.diagnosticos,e[22]=ye):ye=e[22];const[n,K]=j.useState(ye),[Ie,ns]=j.useState(h),[R,cs]=j.useState(J),{processing:Ce}=gs();let Ae;e[23]!==v||e[24]!==d?(Ae=async()=>{if(v)try{const o=await(await fetch(`/api/utentes/processo/${v}`)).json();o.utente?(F(o.utente),qe(!0)):(F({...d,processo:v}),qe(!1))}catch(t){console.error("Error searching utente:",t)}},e[23]=v,e[24]=d,e[25]=Ae):Ae=e[25];const Je=Ae;let De,Pe;e[26]!==h?(De=()=>{ns(t=>{const o=new Set(t.map(Ks)),c=h.filter(l=>!o.has(l.id.toString()));return c.length===0?t:[...t,...c]})},Pe=[h],e[26]=h,e[27]=De,e[28]=Pe):(De=e[27],Pe=e[28]),j.useEffect(De,Pe);let we,Fe;e[29]!==J?(we=()=>{cs(t=>{const o=new Set(t.map(Js)),c=J.filter(l=>!o.has(l.id.toString()));return c.length===0?t:[...t,...c]})},Fe=[J],e[29]=J,e[30]=we,e[31]=Fe):(we=e[30],Fe=e[31]),j.useEffect(we,Fe);let Re;e[32]!==Ie?(Re=Ie.map(Is),e[32]=Ie,e[33]=Re):Re=e[33];const ke=Re;let Te;e[34]!==n?(Te=t=>{const o=t.map(c=>{const l=n.find(u=>u.diagnostico_id===c);return l||{diagnostico_id:c,tipo:"",procedimentos:[{procedimento_id:"",funcao:"",clavien_dindo:"",anatomia_patologica:"",observacoes:""}]}});K(o)},e[34]=n,e[35]=Te):Te=e[35];const Ke=Te;let Ee;e[36]!==n?(Ee=t=>{const o=[...n];o[t].procedimentos.push({procedimento_id:"",funcao:"",clavien_dindo:"",anatomia_patologica:"",observacoes:""}),K(o)},e[36]=n,e[37]=Ee):Ee=e[37];const We=Ee;let Ve;e[38]!==n?(Ve=(t,o)=>{const c=[...n];c[t].procedimentos=c[t].procedimentos.filter((l,u)=>u!==o),K(c)},e[38]=n,e[39]=Ve):Ve=e[39];const Xe=Ve;let $e;e[40]!==n?($e=(t,o,c,l)=>{const u=[...n];u[t].procedimentos[o][c]=l,K(u)},e[40]=n,e[41]=$e):$e=e[41];const W=$e;let Le;e[42]!==n||e[43]!==r||e[44]!==a||e[45]!==d?(Le=()=>{if(a!==5){Me.warning("Por favor complete todos os passos antes de submeter");return}if(n.length===0){Me.error("Adicione pelo menos um diagnóstico antes de submeter"),Ge(3);return}const t=n.map(Gs),o={utente:d,registo:r,diagnosticos:t};ls.post("/registos-cirurgicos",o,{onSuccess:Qs,onError:Ms})},e[42]=n,e[43]=r,e[44]=a,e[45]=d,e[46]=Le):Le=e[46];const Ye=Le;let Oe;e[47]!==n||e[48]!==r||e[49]!==a||e[50]!==d?(Oe=()=>{switch(a){case 1:return d.processo&&d.data_nascimento&&d.sexo;case 2:return r.hospital&&r.especialidade&&r.data_cirurgia&&r.tipo_de_cirurgia_id&&r.tipo_de_abordagem_id;case 3:return n.length>0&&n.every(Hs);case 4:return n.every(zs);default:return!0}},e[47]=n,e[48]=r,e[49]=a,e[50]=d,e[51]=Oe):Oe=e[51];const Ze=Oe;let Ue;e[52]===Symbol.for("react.memo_cache_sentinel")?(Ue=s.jsx(fs,{title:"Criar Registo Cirúrgico"}),e[52]=Ue):Ue=e[52];const es=`flex flex-col gap-4 ${m?"p-4":"p-6"}`,ss=`${m?"text-2xl":"text-3xl"} font-bold tracking-tight`,ts=x?"Duplicar Registo":m?"Novo Registo":"Criar Registo Cirúrgico";let k;e[53]!==ss||e[54]!==ts?(k=s.jsx("h1",{className:ss,children:ts}),e[53]=ss,e[54]=ts,e[55]=k):k=e[55];let T;e[56]!==m||e[57]!==a?(T=!m&&s.jsx("p",{className:"font-medium text-muted-foreground",children:N[a-1]}),e[56]=m,e[57]=a,e[58]=T):T=e[58];let E;e[59]!==k||e[60]!==T?(E=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[k,T]})}),e[59]=k,e[60]=T,e[61]=E):E=e[61];let V;e[62]!==m||e[63]!==a?(V=s.jsx("div",{className:"flex flex-col gap-2",children:m?s.jsxs("div",{className:"flex flex-col gap-1 px-1",children:[s.jsxs("div",{className:"mb-1 flex items-end justify-between",children:[s.jsxs("span",{className:"text-xs font-bold tracking-wider text-primary uppercase",children:["Passo ",a," de 6"]}),s.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:N[a-1]})]}),s.jsx("div",{className:"h-1.5 w-full overflow-hidden rounded-full bg-muted",children:s.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${a/6*100}%`}})})]}):s.jsx("div",{className:"flex gap-2",children:N.map((t,o)=>{const c=o+1;return s.jsxs("div",{className:"flex flex-1 flex-col items-center gap-2",children:[s.jsx("div",{className:`h-2 w-full rounded transition-colors duration-300 ${c<=a?"bg-primary":"bg-muted"}`,title:t}),s.jsx("span",{className:`hidden text-center text-[10px] font-semibold tracking-wider uppercase md:block ${c===a?"text-primary":"text-muted-foreground/50"}`,children:t})]},c)})})}),e[62]=m,e[63]=a,e[64]=V):V=e[64];let $;e[65]!==w?.sexo||e[66]!==v||e[67]!==Je||e[68]!==a||e[69]!==d||e[70]!==be?($=a===1&&s.jsxs(X,{children:[s.jsxs(Y,{children:[s.jsx(Z,{children:N[0]}),s.jsx(ee,{children:"Procure pelo nº de processo ou crie um novo utente"})]}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(p,{htmlFor:"search_processo",children:"Nº de Processo"}),s.jsx(te,{id:"search_processo",type:"number",value:v,onChange:t=>{ps(t.target.value),qe(null)},placeholder:"Digite o nº de processo"})]}),s.jsxs(I,{type:"button",onClick:Je,className:"mt-auto",children:[s.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Procurar"]})]}),be!==null&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border p-4",children:be?s.jsx("p",{className:"text-sm font-medium text-green-600",children:"✓ Utente encontrado"}):s.jsx("p",{className:"text-sm font-medium text-orange-600",children:"⚠ Utente não encontrado. Preencha os dados abaixo para criar."})}),s.jsx(ms,{}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"nome",children:"Nome"}),s.jsx(te,{id:"nome",value:d.nome,onChange:t=>F({...d,nome:t.target.value}),placeholder:"Nome completo"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{htmlFor:"processo",children:["Nº Processo"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(te,{disabled:!0,id:"processo",type:"number",value:d.processo,onChange:t=>F({...d,processo:t.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{htmlFor:"data_nascimento",children:["Data de Nascimento"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(te,{id:"data_nascimento",type:"date",value:d.data_nascimento,onChange:t=>F({...d,data_nascimento:t.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{htmlFor:"sexo",children:["Sexo"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(S,{value:d.sexo,onValueChange:t=>F({...d,sexo:t}),children:[s.jsx(y,{children:s.jsx(C,{placeholder:"Selecione"})}),s.jsx(A,{children:(w?.sexo||[]).map(Us)})]})]})]})]})]})]}),e[65]=w?.sexo,e[66]=v,e[67]=Je,e[68]=a,e[69]=d,e[70]=be,e[71]=$):$=e[71];let L;e[72]!==b||e[73]!==ge||e[74]!==r||e[75]!==a||e[76]!==P||e[77]!==D?(L=a===2&&s.jsxs(X,{children:[s.jsxs(Y,{children:[s.jsx(Z,{children:N[1]}),s.jsx(ee,{children:"Dados da cirurgia"})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{htmlFor:"hospital",children:["Hospital de Origem"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(S,{value:r.hospital,onValueChange:t=>_({...r,hospital:t}),children:[s.jsx(y,{children:s.jsx(C,{placeholder:"Selecione o hospital de origem"})}),s.jsx(A,{children:ge.length>0?ge.map(Os):s.jsx(f,{value:"none",disabled:!0,children:"Nenhum hospital registado"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{htmlFor:"especialidade",children:["Especialidade"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(S,{value:r.especialidade,onValueChange:t=>_({...r,especialidade:t}),children:[s.jsx(y,{children:s.jsx(C,{placeholder:"Selecione a especialidade"})}),s.jsx(A,{children:b.length>0?b.map(Ls):s.jsx(f,{value:"none",disabled:!0,children:"Nenhuma especialidade registada"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{htmlFor:"data_cirurgia",children:["Data da Cirurgia"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(te,{id:"data_cirurgia",type:"date",value:r.data_cirurgia,onChange:t=>_({...r,data_cirurgia:t.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{htmlFor:"tipo_de_cirurgia_id",children:["Tipo de Cirurgia"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(S,{value:r.tipo_de_cirurgia_id,onValueChange:t=>_({...r,tipo_de_cirurgia_id:t}),children:[s.jsx(y,{children:s.jsx(C,{placeholder:"Selecione"})}),s.jsx(A,{children:D.map($s)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{htmlFor:"tipo_de_abordagem_id",children:["Tipo de Abordagem"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(S,{value:r.tipo_de_abordagem_id,onValueChange:t=>_({...r,tipo_de_abordagem_id:t}),children:[s.jsx(y,{children:s.jsx(C,{placeholder:"Selecione"})}),s.jsx(A,{children:P.map(Vs)})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ss,{id:"ambulatorio",checked:r.ambulatorio,onCheckedChange:t=>_({...r,ambulatorio:!!t})}),s.jsx(p,{htmlFor:"ambulatorio",className:"cursor-pointer",children:"Ambulatório"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"observacoes",children:"Observações Gerais"}),s.jsx(ys,{id:"observacoes",value:r.observacoes,onChange:t=>_({...r,observacoes:t.target.value}),rows:3})]})]})]}),e[72]=b,e[73]=ge,e[74]=r,e[75]=a,e[76]=P,e[77]=D,e[78]=L):L=e[78];let O;e[79]!==ke||e[80]!==n||e[81]!==Ke||e[82]!==a||e[83]!==Qe?(O=a===3&&s.jsxs(X,{children:[s.jsx(Y,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Z,{children:N[2]}),s.jsx(ee,{children:"Selecione os diagnósticos da cirurgia"})]}),s.jsx(vs,{onCreated:t=>{if(!t.id)return;const o=t.id.toString();ns(c=>c.some(l=>l.id.toString()===o)?c:[...c,t]),K(c=>c.some(l=>l.diagnostico_id===o)?c:[...c,{diagnostico_id:o,tipo:"",procedimentos:[{procedimento_id:"",funcao:"",clavien_dindo:"",anatomia_patologica:"",observacoes:""}]}])},zonaAnatomicas:Qe})]})}),s.jsx(se,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{children:["Diagnósticos"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ns,{options:ke,value:ke.filter(t=>n.some(o=>o.diagnostico_id===t.value)),onChange:Ke,placeholder:"Selecione um ou mais diagnósticos..."})]})})]}),e[79]=ke,e[80]=n,e[81]=Ke,e[82]=a,e[83]=Qe,e[84]=O):O=e[84];let U;e[85]!==We||e[86]!==R||e[87]!==h||e[88]!==n||e[89]!==w?.funcoes||e[90]!==b||e[91]!==Xe||e[92]!==a||e[93]!==W?(U=a===4&&s.jsxs(X,{children:[s.jsxs(Y,{children:[s.jsx(Z,{children:N[3]}),s.jsx(ee,{children:"Adicione os procedimentos para cada diagnóstico"})]}),s.jsx(se,{className:"space-y-6",children:n.map((t,o)=>{const c=h.find(l=>l.id.toString()===t.diagnostico_id)?.nome;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ds,{variant:"secondary",children:["Diagnóstico ",o+1]}),s.jsx("span",{className:"text-sm font-medium",children:c})]}),t.procedimentos.map((l,u)=>s.jsxs("div",{className:"space-y-3 rounded-md border p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(p,{children:["Intervenção"," ",u+1]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(bs,{especialidades:b,onCreated:g=>{if(g.id){const He=g.id.toString();cs(rs=>rs.some(xs=>xs.id.toString()===He)?rs:[...rs,g]),W(o,u,"procedimento_id",He)}}}),t.procedimentos.length>1&&s.jsx(I,{type:"button",variant:"ghost",size:"sm",onClick:()=>Xe(o,u),children:s.jsx(Ps,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{children:["Procedimento"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(S,{value:l.procedimento_id,onValueChange:g=>W(o,u,"procedimento_id",g),children:[s.jsx(y,{children:s.jsx(C,{placeholder:"Selecione"})}),s.jsx(A,{children:(R||[]).map(Es)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(p,{children:["Função"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(S,{value:l.funcao,onValueChange:g=>W(o,u,"funcao",g),children:[s.jsx(y,{children:s.jsx(C,{placeholder:"Selecione"})}),s.jsx(A,{children:(w?.funcoes||[]).map(Ts)})]})]})]})]},u)),s.jsxs(I,{type:"button",variant:"outline",size:"sm",onClick:()=>We(o),children:[s.jsx(ws,{className:"mr-2 h-4 w-4"}),"Adicionar Intervenção"]}),o<n.length-1&&s.jsx(ms,{})]},o)})})]}),e[85]=We,e[86]=R,e[87]=h,e[88]=n,e[89]=w?.funcoes,e[90]=b,e[91]=Xe,e[92]=a,e[93]=W,e[94]=U):U=e[94];let z;e[95]!==R||e[96]!==h||e[97]!==n||e[98]!==r||e[99]!==a||e[100]!==P||e[101]!==D||e[102]!==d?(z=a===5&&s.jsxs(X,{children:[s.jsxs(Y,{children:[s.jsx(Z,{children:N[4]}),s.jsx(ee,{children:"Revise todos os dados antes de confirmar"})]}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Utente"}),s.jsxs("div",{className:"space-y-1 rounded-md border bg-muted/30 p-4 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Nome:"})," ",d.nome]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Processo:"})," ",d.processo]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Data Nascimento:"})," ",us(d.data_nascimento)]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Sexo:"})," ",d.sexo]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Registo Cirúrgico"}),s.jsxs("div",{className:"space-y-1 rounded-md border bg-muted/30 p-4 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Data:"})," ",us(r.data_cirurgia)]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Tipo:"})," ",D.find(t=>t.id.toString()===r.tipo_de_cirurgia_id)?.nome]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Abordagem:"})," ",P.find(t=>t.id.toString()===r.tipo_de_abordagem_id)?.nome||"N/A"]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Ambulatório:"})," ",r.ambulatorio?"Sim":"Não"]}),r.observacoes&&s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Obs:"})," ",r.observacoes]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Diagnósticos e Intervenções"}),s.jsx("div",{className:"space-y-3",children:n.map((t,o)=>{const c=h.find(l=>l.id.toString()===t.diagnostico_id)?.nome;return s.jsxs("div",{className:"space-y-2 rounded-md border p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-medium",children:["Diagnóstico"," ",o+1,":"," ",c]}),t.tipo&&s.jsx(ds,{variant:t.tipo==="Maligno"?"destructive":"secondary",className:"h-5 text-[10px]",children:t.tipo})]}),s.jsx("div",{className:"space-y-2 pl-4",children:t.procedimentos.map((l,u)=>{const g=R.find(He=>He.id.toString()===l.procedimento_id)?.nome;return s.jsxs("div",{className:"border-l-2 pl-3 text-sm",children:[s.jsxs("p",{children:[s.jsxs("strong",{children:["Intervenção"," ",u+1,":"]})," ",g]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Função:"})," ",l.funcao]}),l.clavien_dindo&&l.clavien_dindo!=="none"&&s.jsxs("p",{children:[s.jsx("strong",{children:"Clavien-Dindo:"})," ",l.clavien_dindo]}),l.anatomia_patologica&&s.jsxs("p",{children:[s.jsx("strong",{children:"Anat. Patológica:"})," ",l.anatomia_patologica]}),l.observacoes&&s.jsxs("p",{children:[s.jsx("strong",{children:"Obs:"})," ",l.observacoes]})]},u)})})]},o)})})]})]})]}),e[95]=R,e[96]=h,e[97]=n,e[98]=r,e[99]=a,e[100]=P,e[101]=D,e[102]=d,e[103]=z):z=e[103];let B;e[104]!==$||e[105]!==L||e[106]!==O||e[107]!==U||e[108]!==z?(B=s.jsxs("form",{children:[$,L,O,U,z]}),e[104]=$,e[105]=L,e[106]=O,e[107]=U,e[108]=z,e[109]=B):B=e[109];const is=`flex items-center justify-between pt-6 ${m?"fixed right-0 bottom-0 left-0 z-50 border-t bg-background/80 p-4 backdrop-blur-md":""}`;let H;e[110]!==a?(H=()=>a>1?Ge(a-1):ls.visit("/registos-cirurgicos"),e[110]=a,e[111]=H):H=e[111];const as=m?"mr-2 flex-1":"";let ze;e[112]===Symbol.for("react.memo_cache_sentinel")?(ze=s.jsx(Rs,{className:"mr-2 h-4 w-4"}),e[112]=ze):ze=e[112];const os=a===1?"Cancelar":m?"Anterior":"Passo Anterior";let M;e[113]!==H||e[114]!==as||e[115]!==os?(M=s.jsxs(I,{type:"button",variant:"outline",onClick:H,className:as,children:[ze,os]}),e[113]=H,e[114]=as,e[115]=os,e[116]=M):M=e[116];let Q;e[117]!==Ze||e[118]!==Ye||e[119]!==m||e[120]!==Ce||e[121]!==a?(Q=a<5?s.jsxs(I,{type:"button",onClick:()=>Ge(a+1),disabled:!Ze(),className:m?"ml-2 flex-1":"",children:[m?"Próximo":"Próximo Passo",s.jsx(_s,{className:"ml-2 h-4 w-4"})]}):s.jsxs(I,{type:"button",disabled:Ce,onClick:Ye,className:`bg-emerald-600 hover:bg-emerald-700 ${m?"ml-2 flex-1":""}`,children:[s.jsx(Fs,{className:"mr-2 h-4 w-4"}),Ce?"A guardar...":"Confirmar e Guardar"]}),e[117]=Ze,e[118]=Ye,e[119]=m,e[120]=Ce,e[121]=a,e[122]=Q):Q=e[122];let G;e[123]!==is||e[124]!==M||e[125]!==Q?(G=s.jsxs("div",{className:is,children:[M,Q]}),e[123]=is,e[124]=M,e[125]=Q,e[126]=G):G=e[126];let q;e[127]!==m?(q=m&&s.jsx("div",{className:"h-20"}),e[127]=m,e[128]=q):q=e[128];let Be;return e[129]!==es||e[130]!==E||e[131]!==V||e[132]!==B||e[133]!==G||e[134]!==q?(Be=s.jsxs(As,{breadcrumbs:ks,children:[Ue,s.jsxs("div",{className:es,children:[E,V,B,G,q," "]})]}),e[129]=es,e[130]=E,e[131]=V,e[132]=B,e[133]=G,e[134]=q,e[135]=Be):Be=e[135],Be}function Ts(i){return s.jsx(f,{value:i,children:i},i)}function Es(i){return s.jsx(f,{value:i.id.toString(),children:i.nome},i.id)}function Vs(i){return s.jsx(f,{value:i.id.toString(),children:i.nome},i.id)}function $s(i){return s.jsx(f,{value:i.id.toString(),children:i.nome},i.id)}function Ls(i){return s.jsx(f,{value:i.nome,children:i.nome},i.id)}function Os(i){return s.jsx(f,{value:i.nome,children:i.nome},i.id)}function Us(i){return s.jsx(f,{value:i,children:i},i)}function zs(i){return i.procedimentos.every(Bs)}function Bs(i){return i.procedimento_id&&i.funcao}function Hs(i){return i.diagnostico_id}function Ms(i){Me.error("Erro ao criar registo cirúrgico. Verifique os dados."),console.error("=== VALIDATION ERRORS ===",i)}function Qs(){Me.success("Registo cirúrgico criado com sucesso!")}function Gs(i){return{diagnostico_id:parseInt(i.diagnostico_id),tipo:i.tipo||null,procedimentos:i.procedimentos.map(qs)}}function qs(i){return{procedimento_id:parseInt(i.procedimento_id),funcao:i.funcao,clavien_dindo:i.clavien_dindo||null,anatomia_patologica:i.anatomia_patologica||null,observacoes:i.observacoes||null}}function Is(i){return{value:i.id.toString(),label:i.nome}}function Js(i){return i.id.toString()}function Ks(i){return i.id.toString()}export{Rt as default};
