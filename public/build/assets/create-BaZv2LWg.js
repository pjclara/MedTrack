import{c as ds,u as ms,r as Y,e as hs,j as s,a as as,H as xs,y as rs}from"./app-DNz7jZeQ.js";import{u as ps,A as us}from"./app-layout-kQUNC9Pz.js";import{B as Z}from"./button-Dc7gL6cH.js";import{b as I,a as ee,C as se,d as ie,c as ae}from"./card-CSLCdj7t.js";import{I as re}from"./input-VfiLBEit.js";import{L as h}from"./label-C1d_iidO.js";import{T as Ie}from"./textarea-2qovVgCJ.js";import{C as js}from"./checkbox-C5n7BIMw.js";import{c as ts}from"./date-formatters-B7sLoE7Z.js";import{c as v,a as f,S as N,b,d as p}from"./select-rVX4JUv1.js";import{Q as gs,C as vs,a as fs,A as Ns}from"./react-select-DDS9_kCC.js";import{B as es}from"./badge-DzBdNBUU.js";import{S as Le}from"./separator-irhdGMGy.js";import{S as bs}from"./search-CIMKGu5I.js";import{T as _s}from"./trash-2-BVYCnXcy.js";import{P as ys}from"./plus-v1w1O_mx.js";import{S as Cs}from"./save-BfcwuQyB.js";import{A as Ss}from"./arrow-left-DdIGM-IU.js";/* empty css            */import"./index--V9oUiAV.js";import"./index-D8PSglQI.js";import"./index-Ca2RPIi6.js";import"./index-Bn93qZ7C.js";import"./createLucideIcon-Cf_iNzeH.js";import"./index-d7sFNsWZ.js";import"./index-BH0NSEIh.js";import"./log-out-BMtl9uoQ.js";import"./activity-w-HFYn_O.js";import"./users-kowV1UZ5.js";import"./clipboard-list-Emp5Yz7w.js";import"./index-DFIIZxfS.js";import"./check-gC62ey99.js";import"./dialog-DUuPI3uR.js";import"./index-DywX51Id.js";const S=["Utente","Registo Cirúrgico","Diagnósticos","Intervenções","Dados Adicionais","Revisão e Confirmação"],Ds=[{title:"Dashboard",href:"/dashboard"},{title:"Registos Cirúrgicos",href:"/registos-cirurgicos"},{title:"Criar",href:"#"}];function yi(a){const e=ds.c(136),{tiposDeCirurgia:oe,tiposDeOrigem:ne,diagnosticos:ss,procedimentos:ce,especialidades:le,hospitals:de,zonaAnatomicas:me,enums:he,duplicateData:u}=a;let xe;e[0]!==oe?(xe=oe===void 0?[]:oe,e[0]=oe,e[1]=xe):xe=e[1];const F=xe;let pe;e[2]!==ne?(pe=ne===void 0?[]:ne,e[2]=ne,e[3]=pe):pe=e[3];const R=pe,j=ss===void 0?[]:ss;let ue;e[4]!==ce?(ue=ce===void 0?[]:ce,e[4]=ce,e[5]=ue):ue=e[5];const _=ue;let je;e[6]!==le?(je=le===void 0?[]:le,e[6]=le,e[7]=je):je=e[7];const P=je;let ge;e[8]!==de?(ge=de===void 0?[]:de,e[8]=de,e[9]=ge):ge=e[9];const ve=ge;let fe;e[10]!==me?(fe=me===void 0?[]:me,e[10]=me,e[11]=fe):fe=e[11];const os=fe;let Ne;e[12]!==he?(Ne=he===void 0?{sexo:[],funcoes:[],clavien:[],tipo_diagnostico:[]}:he,e[12]=he,e[13]=Ne):Ne=e[13];const g=Ne,x=ps(),{auth:be}=ms().props,[r,k]=Y.useState(1),[D,ns]=Y.useState(u?.utente?.processo||""),[_e,$e]=Y.useState(null);let ye;e[14]!==u?.utente?(ye=u?.utente||{nome:"",processo:"",data_nascimento:"",sexo:""},e[14]=u?.utente,e[15]=ye):ye=e[15];const[l,T]=Y.useState(ye);let Ce;e[16]!==be||e[17]!==u?.registo?(Ce=u?.registo||{hospital:be.user.hospital_de_origem||"",especialidade:be.user.especialidade||"",data_cirurgia:"",tipo_de_cirurgia_id:"",tipo_de_origem_id:"",ambulatorio:!1,observacoes:"",tipo_de_abordagem:""},e[16]=be,e[17]=u?.registo,e[18]=Ce):Ce=e[18];const[o,w]=Y.useState(Ce);let Se;e[19]!==u?.diagnosticos?(Se=u?.diagnosticos||[],e[19]=u?.diagnosticos,e[20]=Se):Se=e[20];const[n,te]=Y.useState(Se),{processing:De}=hs();let we;e[21]!==D||e[22]!==l?(we=async()=>{if(D)try{const t=await(await fetch(`/api/utentes/processo/${D}`)).json();t.utente?(T(t.utente),$e(!0)):(T({...l,processo:D}),$e(!1))}catch(i){console.error("Error searching utente:",i)}},e[21]=D,e[22]=l,e[23]=we):we=e[23];const Ue=we,is=j.map(Bs);let Pe;e[24]!==n?(Pe=i=>{const t=i.map(d=>{const c=n.find(m=>m.diagnostico_id===d);return c||{diagnostico_id:d,tipo:"",procedimentos:[{procedimento_id:"",funcao:"",clavien_dindo:"",anatomia_patologica:"",observacoes:""}]}});te(t)},e[24]=n,e[25]=Pe):Pe=e[25];const cs=Pe;let Ae;e[26]!==n?(Ae=i=>{const t=[...n];t[i].procedimentos.push({procedimento_id:"",funcao:"",clavien_dindo:"",anatomia_patologica:"",observacoes:""}),te(t)},e[26]=n,e[27]=Ae):Ae=e[27];const He=Ae;let Fe;e[28]!==n?(Fe=(i,t)=>{const d=[...n];d[i].procedimentos=d[i].procedimentos.filter((c,m)=>m!==t),te(d)},e[28]=n,e[29]=Fe):Fe=e[29];const ze=Fe;let Re;e[30]!==n?(Re=(i,t,d)=>{const c=[...n];c[i][t]=d,te(c)},e[30]=n,e[31]=Re):Re=e[31];const ls=Re;let ke;e[32]!==n?(ke=(i,t,d,c)=>{const m=[...n];m[i].procedimentos[t][d]=c,te(m)},e[32]=n,e[33]=ke):ke=e[33];const y=ke;let Te;e[34]!==n||e[35]!==o||e[36]!==l?(Te=i=>{i.preventDefault();const t={utente:l,registo:o,diagnosticos:n};as.post("/registos-cirurgicos",t,{onSuccess:zs,onError:Hs})},e[34]=n,e[35]=o,e[36]=l,e[37]=Te):Te=e[37];const Be=Te;let Ve;e[38]!==n||e[39]!==o||e[40]!==r||e[41]!==l?(Ve=()=>{switch(r){case 1:return l.processo&&l.data_nascimento&&l.sexo;case 2:return o.hospital&&o.especialidade&&o.data_cirurgia&&o.tipo_de_cirurgia_id&&o.tipo_de_origem_id&&o.tipo_de_abordagem;case 3:return n.length>0&&n.every(Us);case 4:return n.every(Ls);default:return!0}},e[38]=n,e[39]=o,e[40]=r,e[41]=l,e[42]=Ve):Ve=e[42];const Me=Ve,Qe=us,Ge=Ds;let V;e[43]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(xs,{title:"Criar Registo Cirúrgico"}),e[43]=V):V=e[43];const qe=`flex flex-col gap-4 ${x?"p-4":"p-6"}`,Je=`${x?"text-2xl":"text-3xl"} font-bold tracking-tight`,Ke=u?"Duplicar Registo":x?"Novo Registo":"Criar Registo Cirúrgico";let O;e[44]!==Je||e[45]!==Ke?(O=s.jsx("h1",{className:Je,children:Ke}),e[44]=Je,e[45]=Ke,e[46]=O):O=e[46];let E;e[47]!==x||e[48]!==r?(E=!x&&s.jsx("p",{className:"text-muted-foreground font-medium",children:S[r-1]}),e[47]=x,e[48]=r,e[49]=E):E=e[49];let L;e[50]!==O||e[51]!==E?(L=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[O,E]})}),e[50]=O,e[51]=E,e[52]=L):L=e[52];let $;e[53]!==x||e[54]!==r?($=s.jsx("div",{className:"flex flex-col gap-2",children:x?s.jsxs("div",{className:"flex flex-col gap-1 px-1",children:[s.jsxs("div",{className:"flex justify-between items-end mb-1",children:[s.jsxs("span",{className:"text-xs font-bold text-primary uppercase tracking-wider",children:["Passo ",r," de 6"]}),s.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:S[r-1]})]}),s.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${r/6*100}%`}})})]}):s.jsx("div",{className:"flex gap-2",children:S.map((i,t)=>{const d=t+1;return s.jsxs("div",{className:"flex-1 flex flex-col gap-2 items-center",children:[s.jsx("div",{className:`h-2 w-full rounded transition-colors duration-300 ${d<=r?"bg-primary":"bg-muted"}`,title:i}),s.jsx("span",{className:`text-[10px] uppercase tracking-wider font-semibold hidden md:block text-center ${d===r?"text-primary":"text-muted-foreground/50"}`,children:i})]},d)})})}),e[53]=x,e[54]=r,e[55]=$):$=e[55];let U;e[56]!==g?.sexo||e[57]!==D||e[58]!==Ue||e[59]!==r||e[60]!==l||e[61]!==_e?(U=r===1&&s.jsxs(I,{children:[s.jsxs(ee,{children:[s.jsx(se,{children:S[0]}),s.jsx(ie,{children:"Procure pelo nº de processo ou crie um novo utente"})]}),s.jsxs(ae,{className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(h,{htmlFor:"search_processo",children:"Nº de Processo"}),s.jsx(re,{id:"search_processo",type:"number",value:D,onChange:i=>{ns(i.target.value),$e(null)},placeholder:"Digite o nº de processo"})]}),s.jsxs(Z,{type:"button",onClick:Ue,className:"mt-auto",children:[s.jsx(bs,{className:"mr-2 h-4 w-4"}),"Procurar"]})]}),_e!==null&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border p-4",children:_e?s.jsx("p",{className:"text-sm text-green-600 font-medium",children:"✓ Utente encontrado"}):s.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"⚠ Utente não encontrado. Preencha os dados abaixo para criar."})}),s.jsx(Le,{}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"nome",children:"Nome"}),s.jsx(re,{id:"nome",value:l.nome,onChange:i=>T({...l,nome:i.target.value}),placeholder:"Nome completo"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"processo",children:["Nº Processo ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(re,{disabled:!0,id:"processo",type:"number",value:l.processo,onChange:i=>T({...l,processo:i.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"data_nascimento",children:["Data de Nascimento ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(re,{id:"data_nascimento",type:"date",value:l.data_nascimento,onChange:i=>T({...l,data_nascimento:i.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"sexo",children:["Sexo ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(v,{value:l.sexo,onValueChange:i=>T({...l,sexo:i}),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Selecione"})}),s.jsx(b,{children:(g?.sexo||[]).map(Es)})]})]})]})]})]})]}),e[56]=g?.sexo,e[57]=D,e[58]=Ue,e[59]=r,e[60]=l,e[61]=_e,e[62]=U):U=e[62];let H;e[63]!==P||e[64]!==ve||e[65]!==o||e[66]!==r||e[67]!==F||e[68]!==R?(H=r===2&&s.jsxs(I,{children:[s.jsxs(ee,{children:[s.jsx(se,{children:S[1]}),s.jsx(ie,{children:"Dados da cirurgia"})]}),s.jsxs(ae,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"hospital",children:["Hospital de Origem ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(v,{value:o.hospital,onValueChange:i=>w({...o,hospital:i}),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Selecione o hospital de origem"})}),s.jsx(b,{children:ve.length>0?ve.map(Os):s.jsx(p,{value:"none",disabled:!0,children:"Nenhum hospital registado"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"especialidade",children:["Especialidade ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(v,{value:o.especialidade,onValueChange:i=>w({...o,especialidade:i}),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Selecione a especialidade"})}),s.jsx(b,{children:P.length>0?P.map(Vs):s.jsx(p,{value:"none",disabled:!0,children:"Nenhuma especialidade registada"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"data_cirurgia",children:["Data da Cirurgia ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(re,{id:"data_cirurgia",type:"date",value:o.data_cirurgia,onChange:i=>w({...o,data_cirurgia:i.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"tipo_de_cirurgia_id",children:["Tipo de Cirurgia ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(v,{value:o.tipo_de_cirurgia_id,onValueChange:i=>w({...o,tipo_de_cirurgia_id:i}),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Selecione"})}),s.jsx(b,{children:F.map(Ts)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"tipo_de_origem_id",children:["Origem ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(v,{value:o.tipo_de_origem_id,onValueChange:i=>w({...o,tipo_de_origem_id:i}),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Selecione"})}),s.jsx(b,{children:R.map(ks)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{htmlFor:"tipo_de_abordagem",children:["Tipo de Abordagem ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(v,{value:o.tipo_de_abordagem,onValueChange:i=>w({...o,tipo_de_abordagem:i}),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Selecione"})}),s.jsxs(b,{children:[s.jsx(p,{value:"Convencional",children:"Convencional"}),s.jsx(p,{value:"Laparoscópica",children:"Laparoscópica"}),s.jsx(p,{value:"Robótica",children:"Robótica"}),s.jsx(p,{value:"Endoscópica",children:"Endoscópica"}),s.jsx(p,{value:"Híbrida",children:"Híbrida"})]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(js,{id:"ambulatorio",checked:o.ambulatorio,onCheckedChange:i=>w({...o,ambulatorio:!!i})}),s.jsx(h,{htmlFor:"ambulatorio",className:"cursor-pointer",children:"Ambulatório"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"observacoes",children:"Observações Gerais"}),s.jsx(Ie,{id:"observacoes",value:o.observacoes,onChange:i=>w({...o,observacoes:i.target.value}),rows:3})]})]})]}),e[63]=P,e[64]=ve,e[65]=o,e[66]=r,e[67]=F,e[68]=R,e[69]=H):H=e[69];const We=r===3&&s.jsxs(I,{children:[s.jsx(ee,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(se,{children:S[2]}),s.jsx(ie,{children:"Selecione os diagnósticos da cirurgia"})]}),s.jsx(gs,{onCreated:Rs,zonaAnatomicas:os})]})}),s.jsxs(ae,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{children:["Diagnósticos ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(vs,{options:is,value:is.filter(i=>n.some(t=>t.diagnostico_id===i.value)),onChange:cs,placeholder:"Selecione um ou mais diagnósticos..."})]}),n.length>0&&s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsx(Le,{}),s.jsx("h3",{className:"text-sm font-medium",children:"Classificação dos Diagnósticos"}),n.map((i,t)=>{const d=j.find(c=>c.id.toString()===i.diagnostico_id)?.nome;return s.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center p-3 border rounded-md",children:[s.jsx("span",{className:"text-sm font-medium",children:d}),s.jsx("div",{className:"space-y-1",children:s.jsxs(v,{value:i.tipo,onValueChange:c=>ls(t,"tipo",c),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Tipo (Benigno/Maligno)"})}),s.jsx(b,{children:(g?.tipo_diagnostico||[]).map(Fs)})]})})]},i.diagnostico_id)})]})]})]});let z;e[70]!==He||e[71]!==j||e[72]!==n||e[73]!==g?.funcoes||e[74]!==P||e[75]!==_||e[76]!==ze||e[77]!==r||e[78]!==y?(z=r===4&&s.jsxs(I,{children:[s.jsxs(ee,{children:[s.jsx(se,{children:S[3]}),s.jsx(ie,{children:"Adicione os procedimentos para cada diagnóstico"})]}),s.jsx(ae,{className:"space-y-6",children:n.map((i,t)=>{const d=j.find(c=>c.id.toString()===i.diagnostico_id)?.nome;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(es,{variant:"secondary",children:["Diagnóstico ",t+1]}),s.jsx("span",{className:"text-sm font-medium",children:d})]}),i.procedimentos.map((c,m)=>s.jsxs("div",{className:"rounded-md border p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(h,{children:["Intervenção ",m+1]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(fs,{especialidades:P}),i.procedimentos.length>1&&s.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:()=>ze(t,m),children:s.jsx(_s,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{children:["Procedimento ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(v,{value:c.procedimento_id,onValueChange:A=>y(t,m,"procedimento_id",A),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Selecione"})}),s.jsx(b,{children:(_||[]).map(As)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{children:["Função ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(v,{value:c.funcao,onValueChange:A=>y(t,m,"funcao",A),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Selecione"})}),s.jsx(b,{children:(g?.funcoes||[]).map(Ps)})]})]})]})]},m)),s.jsxs(Z,{type:"button",variant:"outline",size:"sm",onClick:()=>He(t),children:[s.jsx(ys,{className:"mr-2 h-4 w-4"}),"Adicionar Intervenção"]}),t<n.length-1&&s.jsx(Le,{})]},t)})})]}),e[70]=He,e[71]=j,e[72]=n,e[73]=g?.funcoes,e[74]=P,e[75]=_,e[76]=ze,e[77]=r,e[78]=y,e[79]=z):z=e[79];let B;e[80]!==j||e[81]!==n||e[82]!==g?.clavien||e[83]!==_||e[84]!==r||e[85]!==y?(B=r===5&&s.jsxs(I,{children:[s.jsxs(ee,{children:[s.jsx(se,{children:S[4]}),s.jsx(ie,{children:"Informações complementares (opcional)"})]}),s.jsx(ae,{className:"space-y-6",children:n.map((i,t)=>{const d=j.find(c=>c.id.toString()===i.diagnostico_id)?.nome;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(es,{variant:"secondary",children:["Diagnóstico ",t+1]}),s.jsx("span",{className:"text-sm font-medium",children:d})]}),i.procedimentos.map((c,m)=>{const A=_.find(C=>C.id.toString()===c.procedimento_id)?.nome;return s.jsxs("div",{className:"rounded-md border p-4 space-y-3",children:[s.jsxs(h,{className:"font-medium",children:["Intervenção ",m+1,": ",A]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{children:"Clavien-Dindo"}),s.jsxs(v,{value:c.clavien_dindo,onValueChange:C=>y(t,m,"clavien_dindo",C),children:[s.jsx(f,{children:s.jsx(N,{placeholder:"Nenhum"})}),s.jsxs(b,{children:[s.jsx(p,{value:"none",children:"Nenhum"}),(g?.clavien||[]).map(ws)]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{children:"Anatomia Patológica"}),s.jsx(Ie,{value:c.anatomia_patologica,onChange:C=>y(t,m,"anatomia_patologica",C.target.value),rows:2})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{children:"Observações Específicas"}),s.jsx(Ie,{value:c.observacoes,onChange:C=>y(t,m,"observacoes",C.target.value),rows:2})]})]},m)}),t<n.length-1&&s.jsx(Le,{})]},t)})})]}),e[80]=j,e[81]=n,e[82]=g?.clavien,e[83]=_,e[84]=r,e[85]=y,e[86]=B):B=e[86];let M;e[87]!==j||e[88]!==n||e[89]!==_||e[90]!==o||e[91]!==r||e[92]!==F||e[93]!==R||e[94]!==l?(M=r===6&&s.jsxs(I,{children:[s.jsxs(ee,{children:[s.jsx(se,{children:S[5]}),s.jsx(ie,{children:"Revise todos os dados antes de confirmar"})]}),s.jsxs(ae,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Utente"}),s.jsxs("div",{className:"rounded-md border p-4 space-y-1 text-sm bg-muted/30",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Nome:"})," ",l.nome]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Processo:"})," ",l.processo]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Data Nascimento:"})," ",ts(l.data_nascimento)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Sexo:"})," ",l.sexo]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Registo Cirúrgico"}),s.jsxs("div",{className:"rounded-md border p-4 space-y-1 text-sm bg-muted/30",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Data:"})," ",ts(o.data_cirurgia)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Tipo:"})," ",F.find(i=>i.id.toString()===o.tipo_de_cirurgia_id)?.nome]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Origem:"})," ",R.find(i=>i.id.toString()===o.tipo_de_origem_id)?.nome]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Abordagem:"})," ",o.tipo_de_abordagem]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Ambulatório:"})," ",o.ambulatorio?"Sim":"Não"]}),o.observacoes&&s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground mr-1",children:"Obs:"})," ",o.observacoes]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Diagnósticos e Intervenções"}),s.jsx("div",{className:"space-y-3",children:n.map((i,t)=>{const d=j.find(c=>c.id.toString()===i.diagnostico_id)?.nome;return s.jsxs("div",{className:"rounded-md border p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-medium",children:["Diagnóstico ",t+1,": ",d]}),i.tipo&&s.jsx(es,{variant:i.tipo==="Maligno"?"destructive":"secondary",className:"text-[10px] h-5",children:i.tipo})]}),s.jsx("div",{className:"pl-4 space-y-2",children:i.procedimentos.map((c,m)=>{const A=_.find(C=>C.id.toString()===c.procedimento_id)?.nome;return s.jsxs("div",{className:"text-sm border-l-2 pl-3",children:[s.jsxs("p",{children:[s.jsxs("strong",{children:["Intervenção ",m+1,":"]})," ",A]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Função:"})," ",c.funcao]}),c.clavien_dindo&&c.clavien_dindo!=="none"&&s.jsxs("p",{children:[s.jsx("strong",{children:"Clavien-Dindo:"})," ",c.clavien_dindo]}),c.anatomia_patologica&&s.jsxs("p",{children:[s.jsx("strong",{children:"Anat. Patológica:"})," ",c.anatomia_patologica]}),c.observacoes&&s.jsxs("p",{children:[s.jsx("strong",{children:"Obs:"})," ",c.observacoes]})]},m)})})]},t)})})]})]})]}),e[87]=j,e[88]=n,e[89]=_,e[90]=o,e[91]=r,e[92]=F,e[93]=R,e[94]=l,e[95]=M):M=e[95];const Xe=`flex items-center justify-between pt-6 ${x?"fixed bottom-0 left-0 right-0 bg-background/80 backdrop-blur-md border-t p-4 z-50":""}`;let Q;e[96]!==k||e[97]!==r?(Q=()=>r>1?k(r-1):as.visit("/registos-cirurgicos"),e[96]=k,e[97]=r,e[98]=Q):Q=e[98];const Ye=x?"flex-1 mr-2":"";let Oe;e[99]===Symbol.for("react.memo_cache_sentinel")?(Oe=s.jsx(Ss,{className:"mr-2 h-4 w-4"}),e[99]=Oe):Oe=e[99];const Ze=r===1?"Cancelar":x?"Anterior":"Passo Anterior";let G;e[100]!==Q||e[101]!==Ye||e[102]!==Ze?(G=s.jsxs(Z,{type:"button",variant:"outline",onClick:Q,className:Ye,children:[Oe,Ze]}),e[100]=Q,e[101]=Ye,e[102]=Ze,e[103]=G):G=e[103];let q;e[104]!==Me||e[105]!==x||e[106]!==De||e[107]!==k||e[108]!==r?(q=r<6?s.jsxs(Z,{type:"button",onClick:()=>k(r+1),disabled:!Me(),className:x?"flex-1 ml-2":"",children:[x?"Próximo":"Próximo Passo",s.jsx(Ns,{className:"ml-2 h-4 w-4"})]}):s.jsxs(Z,{type:"submit",disabled:De,className:`bg-emerald-600 hover:bg-emerald-700 ${x?"flex-1 ml-2":""}`,children:[s.jsx(Cs,{className:"mr-2 h-4 w-4"}),De?"A guardar...":"Confirmar e Guardar"]}),e[104]=Me,e[105]=x,e[106]=De,e[107]=k,e[108]=r,e[109]=q):q=e[109];let J;e[110]!==Xe||e[111]!==G||e[112]!==q?(J=s.jsxs("div",{className:Xe,children:[G,q]}),e[110]=Xe,e[111]=G,e[112]=q,e[113]=J):J=e[113];let K;e[114]!==x?(K=x&&s.jsx("div",{className:"h-20"}),e[114]=x,e[115]=K):K=e[115];let W;e[116]!==Be||e[117]!==U||e[118]!==H||e[119]!==We||e[120]!==z||e[121]!==B||e[122]!==M||e[123]!==J||e[124]!==K?(W=s.jsxs("form",{onSubmit:Be,children:[U,H,We,z,B,M,J,K," "]}),e[116]=Be,e[117]=U,e[118]=H,e[119]=We,e[120]=z,e[121]=B,e[122]=M,e[123]=J,e[124]=K,e[125]=W):W=e[125];let X;e[126]!==qe||e[127]!==L||e[128]!==$||e[129]!==W?(X=s.jsxs("div",{className:qe,children:[L,$,W]}),e[126]=qe,e[127]=L,e[128]=$,e[129]=W,e[130]=X):X=e[130];let Ee;return e[131]!==Qe||e[132]!==Ge||e[133]!==V||e[134]!==X?(Ee=s.jsxs(Qe,{breadcrumbs:Ge,children:[V,X]}),e[131]=Qe,e[132]=Ge,e[133]=V,e[134]=X,e[135]=Ee):Ee=e[135],Ee}function ws(a){return s.jsx(p,{value:a,children:a},a)}function Ps(a){return s.jsx(p,{value:a,children:a},a)}function As(a){return s.jsx(p,{value:a.id.toString(),children:a.nome},a.id)}function Fs(a){return s.jsx(p,{value:a,children:a},a)}function Rs(a){}function ks(a){return s.jsx(p,{value:a.id.toString(),children:a.nome},a.id)}function Ts(a){return s.jsx(p,{value:a.id.toString(),children:a.nome},a.id)}function Vs(a){return s.jsx(p,{value:a.nome,children:a.nome},a.id)}function Os(a){return s.jsx(p,{value:a.nome,children:a.nome},a.id)}function Es(a){return s.jsx(p,{value:a,children:a},a)}function Ls(a){return a.procedimentos.every($s)}function $s(a){return a.procedimento_id&&a.funcao}function Us(a){return a.diagnostico_id}function Hs(a){rs.error("Erro ao criar registo cirúrgico. Verifique os dados."),console.error(a)}function zs(){rs.success("Registo cirúrgico criado com sucesso!")}function Bs(a){return{value:a.id.toString(),label:a.nome}}export{yi as default};
