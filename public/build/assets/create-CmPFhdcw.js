import{c as fs,e as vs,r as j,u as Ns,j as s,y as qe,a as us,H as bs}from"./app-C_6RYPSG.js";import{Q as _s,C as Ss,a as ys,A as Cs}from"./react-select-B0BJ479I.js";import{B as ps}from"./badge-DMYQ0qwP.js";import{B as J}from"./button-BArp9tE2.js";import{b as Y,a as Z,C as ee,d as se,c as te}from"./card-Cqg0stwP.js";import{C as Ds}from"./checkbox-kbX6vSCH.js";import{I as ie}from"./input-BMRhJchC.js";import{L as u}from"./label-DFgvpaVA.js";import{c as b,a as _,S,b as y,d as g}from"./select-BQQUItXd.js";import{S as xs}from"./separator-B_FC9Kcf.js";import{T as As}from"./textarea-CrvAHUJ0.js";import{u as Ps,A as ws}from"./app-layout-Not_6KTr.js";import{c as hs}from"./date-formatters-B7sLoE7Z.js";import{S as Fs}from"./search-BJm7XQ4V.js";import{T as Rs}from"./trash-2-CyPUwleF.js";import{P as ks}from"./plus-BF6QPJM_.js";import{S as Os}from"./save-DX1bETwr.js";import{A as Ts}from"./arrow-left-Bk2cBwTw.js";/* empty css            */import"./createLucideIcon-C72gVIb_.js";import"./dialog-CiNMiCIO.js";import"./index-DY9wQ7mW.js";import"./index-DywX51Id.js";import"./index-BSI7EE9f.js";import"./index-D5PpwhuU.js";import"./index-BpYoW6wz.js";import"./index-DBnl2lrX.js";import"./check-DExmqyq6.js";import"./index-DQKlveR7.js";import"./index-BH0NSEIh.js";import"./log-out-hmZ_RmwO.js";import"./activity-BKfs1XZy.js";import"./users-DZEPP9W7.js";import"./graduation-cap-nOxmVN_a.js";import"./clipboard-list-Dl-Wpbv3.js";const C=["Utente","Registo Cirúrgico","Diagnósticos","Intervenções","Revisão e Confirmação"],Vs=[{title:"Dashboard",href:"/dashboard"},{title:"Registos Cirúrgicos",href:"/registos-cirurgicos"},{title:"Criar",href:"#"}];function Vt(i){const e=fs.c(140),{tiposDeCirurgia:oe,tiposDeOrigem:ae,tiposDeAbordagem:re,diagnosticos:ne,procedimentos:ce,especialidades:le,hospitals:de,zonaAnatomicas:me,enums:ue,duplicateData:x}=i;let pe;e[0]!==oe?(pe=oe===void 0?[]:oe,e[0]=oe,e[1]=pe):pe=e[1];const A=pe;let xe;e[2]!==ae?(xe=ae===void 0?[]:ae,e[2]=ae,e[3]=xe):xe=e[3];const P=xe;let he;e[4]!==re?(he=re===void 0?[]:re,e[4]=re,e[5]=he):he=e[5];const w=he;let je;e[6]!==ne?(je=ne===void 0?[]:ne,e[6]=ne,e[7]=je):je=e[7];const h=je;let ge;e[8]!==ce?(ge=ce===void 0?[]:ce,e[8]=ce,e[9]=ge):ge=e[9];const K=ge;let fe;e[10]!==le?(fe=le===void 0?[]:le,e[10]=le,e[11]=fe):fe=e[11];const D=fe;let ve;e[12]!==de?(ve=de===void 0?[]:de,e[12]=de,e[13]=ve):ve=e[13];const Ne=ve;let be;e[14]!==me?(be=me===void 0?[]:me,e[14]=me,e[15]=be):be=e[15];const Ie=be;let _e;e[16]!==ue?(_e=ue===void 0?{sexo:[],funcoes:[],clavien:[],tipo_diagnostico:[]}:ue,e[16]=ue,e[17]=_e):_e=e[17];const F=_e,m=Ps(),{auth:Se}=vs().props,[o,Je]=j.useState(1),[v,js]=j.useState(x?.utente?.processo||""),[ye,Ke]=j.useState(null);let Ce;e[18]!==x?.utente?(Ce=x?.utente||{nome:"",processo:"",data_nascimento:"",sexo:""},e[18]=x?.utente,e[19]=Ce):Ce=e[19];const[d,R]=j.useState(Ce);let De;e[20]!==Se||e[21]!==x?.registo?(De=x?.registo||{hospital:Se.user.hospital_de_origem||"",especialidade:Se.user.especialidade||"",data_cirurgia:"",tipo_de_cirurgia_id:"",tipo_de_origem_id:"",ambulatorio:!1,observacoes:"",tipo_de_abordagem_id:""},e[20]=Se,e[21]=x?.registo,e[22]=De):De=e[22];const[a,N]=j.useState(De);let Ae;e[23]!==x?.diagnosticos?(Ae=x?.diagnosticos||[],e[23]=x?.diagnosticos,e[24]=Ae):Ae=e[24];const[n,W]=j.useState(Ae),[We,ds]=j.useState(h),[k,ms]=j.useState(K),{processing:Pe}=Ns();let we;e[25]!==v||e[26]!==d?(we=async()=>{if(v)try{const r=await(await fetch(`/api/utentes/processo/${v}`)).json();r.utente?(R(r.utente),Ke(!0)):(R({...d,processo:v}),Ke(!1))}catch(t){console.error("Error searching utente:",t)}},e[25]=v,e[26]=d,e[27]=we):we=e[27];const Xe=we;let Fe,Re;e[28]!==h?(Fe=()=>{ds(t=>{const r=new Set(t.map(Zs)),c=h.filter(l=>!r.has(l.id.toString()));return c.length===0?t:[...t,...c]})},Re=[h],e[28]=h,e[29]=Fe,e[30]=Re):(Fe=e[29],Re=e[30]),j.useEffect(Fe,Re);let ke,Oe;e[31]!==K?(ke=()=>{ms(t=>{const r=new Set(t.map(Ys)),c=K.filter(l=>!r.has(l.id.toString()));return c.length===0?t:[...t,...c]})},Oe=[K],e[31]=K,e[32]=ke,e[33]=Oe):(ke=e[32],Oe=e[33]),j.useEffect(ke,Oe);let Te;e[34]!==We?(Te=We.map(Xs),e[34]=We,e[35]=Te):Te=e[35];const Ve=Te;let Ee;e[36]!==n?(Ee=t=>{const r=t.map(c=>{const l=n.find(p=>p.diagnostico_id===c);return l||{diagnostico_id:c,tipo:"",procedimentos:[{procedimento_id:"",funcao:"",clavien_dindo:"",anatomia_patologica:"",observacoes:""}]}});W(r)},e[36]=n,e[37]=Ee):Ee=e[37];const Ye=Ee;let $e;e[38]!==n?($e=t=>{const r=[...n];r[t].procedimentos.push({procedimento_id:"",funcao:"",clavien_dindo:"",anatomia_patologica:"",observacoes:""}),W(r)},e[38]=n,e[39]=$e):$e=e[39];const Ze=$e;let Le;e[40]!==n?(Le=(t,r)=>{const c=[...n];c[t].procedimentos=c[t].procedimentos.filter((l,p)=>p!==r),W(c)},e[40]=n,e[41]=Le):Le=e[41];const es=Le;let Ue;e[42]!==n?(Ue=(t,r,c,l)=>{const p=[...n];p[t].procedimentos[r][c]=l,W(p)},e[42]=n,e[43]=Ue):Ue=e[43];const X=Ue;let ze;e[44]!==n||e[45]!==a||e[46]!==o||e[47]!==d?(ze=()=>{if(o!==5){qe.warning("Por favor complete todos os passos antes de submeter");return}if(n.length===0){qe.error("Adicione pelo menos um diagnóstico antes de submeter"),Je(3);return}const t=n.map(Ks),r={utente:d,registo:a,diagnosticos:t};us.post("/registos-cirurgicos",r,{onSuccess:Js,onError:Is})},e[44]=n,e[45]=a,e[46]=o,e[47]=d,e[48]=ze):ze=e[48];const ss=ze;let Be;e[49]!==n||e[50]!==a||e[51]!==o||e[52]!==d?(Be=()=>{switch(o){case 1:return d.processo&&d.data_nascimento&&d.sexo;case 2:return a.hospital&&a.especialidade&&a.data_cirurgia&&a.tipo_de_cirurgia_id&&a.tipo_de_origem_id&&a.tipo_de_abordagem_id;case 3:return n.length>0&&n.every(qs);case 4:return n.every(Qs);default:return!0}},e[49]=n,e[50]=a,e[51]=o,e[52]=d,e[53]=Be):Be=e[53];const ts=Be;let He;e[54]===Symbol.for("react.memo_cache_sentinel")?(He=s.jsx(bs,{title:"Criar Registo Cirúrgico"}),e[54]=He):He=e[54];const is=`flex flex-col gap-4 ${m?"p-4":"p-6"}`,os=`${m?"text-2xl":"text-3xl"} font-bold tracking-tight`,as=x?"Duplicar Registo":m?"Novo Registo":"Criar Registo Cirúrgico";let O;e[55]!==os||e[56]!==as?(O=s.jsx("h1",{className:os,children:as}),e[55]=os,e[56]=as,e[57]=O):O=e[57];let T;e[58]!==m||e[59]!==o?(T=!m&&s.jsx("p",{className:"font-medium text-muted-foreground",children:C[o-1]}),e[58]=m,e[59]=o,e[60]=T):T=e[60];let V;e[61]!==O||e[62]!==T?(V=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[O,T]})}),e[61]=O,e[62]=T,e[63]=V):V=e[63];let E;e[64]!==m||e[65]!==o?(E=s.jsx("div",{className:"flex flex-col gap-2",children:m?s.jsxs("div",{className:"flex flex-col gap-1 px-1",children:[s.jsxs("div",{className:"mb-1 flex items-end justify-between",children:[s.jsxs("span",{className:"text-xs font-bold tracking-wider text-primary uppercase",children:["Passo ",o," de 6"]}),s.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:C[o-1]})]}),s.jsx("div",{className:"h-1.5 w-full overflow-hidden rounded-full bg-muted",children:s.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${o/6*100}%`}})})]}):s.jsx("div",{className:"flex gap-2",children:C.map((t,r)=>{const c=r+1;return s.jsxs("div",{className:"flex flex-1 flex-col items-center gap-2",children:[s.jsx("div",{className:`h-2 w-full rounded transition-colors duration-300 ${c<=o?"bg-primary":"bg-muted"}`,title:t}),s.jsx("span",{className:`hidden text-center text-[10px] font-semibold tracking-wider uppercase md:block ${c===o?"text-primary":"text-muted-foreground/50"}`,children:t})]},c)})})}),e[64]=m,e[65]=o,e[66]=E):E=e[66];let $;e[67]!==F?.sexo||e[68]!==v||e[69]!==Xe||e[70]!==o||e[71]!==d||e[72]!==ye?($=o===1&&s.jsxs(Y,{children:[s.jsxs(Z,{children:[s.jsx(ee,{children:C[0]}),s.jsx(se,{children:"Procure pelo nº de processo ou crie um novo utente"})]}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(u,{htmlFor:"search_processo",children:"Nº de Processo"}),s.jsx(ie,{id:"search_processo",type:"number",value:v,onChange:t=>{js(t.target.value),Ke(null)},placeholder:"Digite o nº de processo"})]}),s.jsxs(J,{type:"button",onClick:Xe,className:"mt-auto",children:[s.jsx(Fs,{className:"mr-2 h-4 w-4"}),"Procurar"]})]}),ye!==null&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border p-4",children:ye?s.jsx("p",{className:"text-sm font-medium text-green-600",children:"✓ Utente encontrado"}):s.jsx("p",{className:"text-sm font-medium text-orange-600",children:"⚠ Utente não encontrado. Preencha os dados abaixo para criar."})}),s.jsx(xs,{}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"nome",children:"Nome"}),s.jsx(ie,{id:"nome",value:d.nome,onChange:t=>R({...d,nome:t.target.value}),placeholder:"Nome completo"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"processo",children:["Nº Processo"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(ie,{disabled:!0,id:"processo",type:"number",value:d.processo,onChange:t=>R({...d,processo:t.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"data_nascimento",children:["Data de Nascimento"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(ie,{id:"data_nascimento",type:"date",value:d.data_nascimento,onChange:t=>R({...d,data_nascimento:t.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"sexo",children:["Sexo"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(b,{value:d.sexo,onValueChange:t=>R({...d,sexo:t}),children:[s.jsx(_,{children:s.jsx(S,{placeholder:"Selecione"})}),s.jsx(y,{children:(F?.sexo||[]).map(Ms)})]})]})]})]})]})]}),e[67]=F?.sexo,e[68]=v,e[69]=Xe,e[70]=o,e[71]=d,e[72]=ye,e[73]=$):$=e[73];let L;e[74]!==D||e[75]!==Ne||e[76]!==a||e[77]!==o||e[78]!==w||e[79]!==A||e[80]!==P?(L=o===2&&s.jsxs(Y,{children:[s.jsxs(Z,{children:[s.jsx(ee,{children:C[1]}),s.jsx(se,{children:"Dados da cirurgia"})]}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"hospital",children:["Hospital de Origem"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(b,{value:a.hospital,onValueChange:t=>N({...a,hospital:t}),children:[s.jsx(_,{children:s.jsx(S,{placeholder:"Selecione o hospital de origem"})}),s.jsx(y,{children:Ne.length>0?Ne.map(Hs):s.jsx(g,{value:"none",disabled:!0,children:"Nenhum hospital registado"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"especialidade",children:["Especialidade"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(b,{value:a.especialidade,onValueChange:t=>N({...a,especialidade:t}),children:[s.jsx(_,{children:s.jsx(S,{placeholder:"Selecione a especialidade"})}),s.jsx(y,{children:D.length>0?D.map(Bs):s.jsx(g,{value:"none",disabled:!0,children:"Nenhuma especialidade registada"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"data_cirurgia",children:["Data da Cirurgia"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(ie,{id:"data_cirurgia",type:"date",value:a.data_cirurgia,onChange:t=>N({...a,data_cirurgia:t.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"tipo_de_cirurgia_id",children:["Tipo de Cirurgia"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(b,{value:a.tipo_de_cirurgia_id,onValueChange:t=>N({...a,tipo_de_cirurgia_id:t}),children:[s.jsx(_,{children:s.jsx(S,{placeholder:"Selecione"})}),s.jsx(y,{children:A.map(zs)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"tipo_de_origem_id",children:["Origem"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(b,{value:a.tipo_de_origem_id,onValueChange:t=>N({...a,tipo_de_origem_id:t}),children:[s.jsx(_,{children:s.jsx(S,{placeholder:"Selecione"})}),s.jsx(y,{children:P.map(Us)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{htmlFor:"tipo_de_abordagem_id",children:["Tipo de Abordagem"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(b,{value:a.tipo_de_abordagem_id,onValueChange:t=>N({...a,tipo_de_abordagem_id:t}),children:[s.jsx(_,{children:s.jsx(S,{placeholder:"Selecione"})}),s.jsx(y,{children:w.map(Ls)})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ds,{id:"ambulatorio",checked:a.ambulatorio,onCheckedChange:t=>N({...a,ambulatorio:!!t})}),s.jsx(u,{htmlFor:"ambulatorio",className:"cursor-pointer",children:"Ambulatório"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"observacoes",children:"Observações Gerais"}),s.jsx(As,{id:"observacoes",value:a.observacoes,onChange:t=>N({...a,observacoes:t.target.value}),rows:3})]})]})]}),e[74]=D,e[75]=Ne,e[76]=a,e[77]=o,e[78]=w,e[79]=A,e[80]=P,e[81]=L):L=e[81];let U;e[82]!==Ve||e[83]!==n||e[84]!==Ye||e[85]!==o||e[86]!==Ie?(U=o===3&&s.jsxs(Y,{children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ee,{children:C[2]}),s.jsx(se,{children:"Selecione os diagnósticos da cirurgia"})]}),s.jsx(_s,{onCreated:t=>{if(!t.id)return;const r=t.id.toString();ds(c=>c.some(l=>l.id.toString()===r)?c:[...c,t]),W(c=>c.some(l=>l.diagnostico_id===r)?c:[...c,{diagnostico_id:r,tipo:"",procedimentos:[{procedimento_id:"",funcao:"",clavien_dindo:"",anatomia_patologica:"",observacoes:""}]}])},zonaAnatomicas:Ie})]})}),s.jsx(te,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{children:["Diagnósticos"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ss,{options:Ve,value:Ve.filter(t=>n.some(r=>r.diagnostico_id===t.value)),onChange:Ye,placeholder:"Selecione um ou mais diagnósticos..."})]})})]}),e[82]=Ve,e[83]=n,e[84]=Ye,e[85]=o,e[86]=Ie,e[87]=U):U=e[87];let z;e[88]!==Ze||e[89]!==k||e[90]!==h||e[91]!==n||e[92]!==F?.funcoes||e[93]!==D||e[94]!==es||e[95]!==o||e[96]!==X?(z=o===4&&s.jsxs(Y,{children:[s.jsxs(Z,{children:[s.jsx(ee,{children:C[3]}),s.jsx(se,{children:"Adicione os procedimentos para cada diagnóstico"})]}),s.jsx(te,{className:"space-y-6",children:n.map((t,r)=>{const c=h.find(l=>l.id.toString()===t.diagnostico_id)?.nome;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ps,{variant:"secondary",children:["Diagnóstico ",r+1]}),s.jsx("span",{className:"text-sm font-medium",children:c})]}),t.procedimentos.map((l,p)=>s.jsxs("div",{className:"space-y-3 rounded-md border p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(u,{children:["Intervenção"," ",p+1]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ys,{especialidades:D,onCreated:f=>{if(f.id){const Ge=f.id.toString();ms(ls=>ls.some(gs=>gs.id.toString()===Ge)?ls:[...ls,f]),X(r,p,"procedimento_id",Ge)}}}),t.procedimentos.length>1&&s.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>es(r,p),children:s.jsx(Rs,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{children:["Procedimento"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(b,{value:l.procedimento_id,onValueChange:f=>X(r,p,"procedimento_id",f),children:[s.jsx(_,{children:s.jsx(S,{placeholder:"Selecione"})}),s.jsx(y,{children:(k||[]).map($s)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{children:["Função"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(b,{value:l.funcao,onValueChange:f=>X(r,p,"funcao",f),children:[s.jsx(_,{children:s.jsx(S,{placeholder:"Selecione"})}),s.jsx(y,{children:(F?.funcoes||[]).map(Es)})]})]})]})]},p)),s.jsxs(J,{type:"button",variant:"outline",size:"sm",onClick:()=>Ze(r),children:[s.jsx(ks,{className:"mr-2 h-4 w-4"}),"Adicionar Intervenção"]}),r<n.length-1&&s.jsx(xs,{})]},r)})})]}),e[88]=Ze,e[89]=k,e[90]=h,e[91]=n,e[92]=F?.funcoes,e[93]=D,e[94]=es,e[95]=o,e[96]=X,e[97]=z):z=e[97];let B;e[98]!==k||e[99]!==h||e[100]!==n||e[101]!==a||e[102]!==o||e[103]!==w||e[104]!==A||e[105]!==P||e[106]!==d?(B=o===5&&s.jsxs(Y,{children:[s.jsxs(Z,{children:[s.jsx(ee,{children:C[4]}),s.jsx(se,{children:"Revise todos os dados antes de confirmar"})]}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Utente"}),s.jsxs("div",{className:"space-y-1 rounded-md border bg-muted/30 p-4 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Nome:"})," ",d.nome]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Processo:"})," ",d.processo]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Data Nascimento:"})," ",hs(d.data_nascimento)]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Sexo:"})," ",d.sexo]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Registo Cirúrgico"}),s.jsxs("div",{className:"space-y-1 rounded-md border bg-muted/30 p-4 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Data:"})," ",hs(a.data_cirurgia)]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Tipo:"})," ",A.find(t=>t.id.toString()===a.tipo_de_cirurgia_id)?.nome]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Origem:"})," ",P.find(t=>t.id.toString()===a.tipo_de_origem_id)?.nome]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Abordagem:"})," ",w.find(t=>t.id.toString()===a.tipo_de_abordagem_id)?.nome||"N/A"]}),s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Ambulatório:"})," ",a.ambulatorio?"Sim":"Não"]}),a.observacoes&&s.jsxs("p",{children:[s.jsx("span",{className:"mr-1 text-muted-foreground",children:"Obs:"})," ",a.observacoes]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Diagnósticos e Intervenções"}),s.jsx("div",{className:"space-y-3",children:n.map((t,r)=>{const c=h.find(l=>l.id.toString()===t.diagnostico_id)?.nome;return s.jsxs("div",{className:"space-y-2 rounded-md border p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-medium",children:["Diagnóstico"," ",r+1,":"," ",c]}),t.tipo&&s.jsx(ps,{variant:t.tipo==="Maligno"?"destructive":"secondary",className:"h-5 text-[10px]",children:t.tipo})]}),s.jsx("div",{className:"space-y-2 pl-4",children:t.procedimentos.map((l,p)=>{const f=k.find(Ge=>Ge.id.toString()===l.procedimento_id)?.nome;return s.jsxs("div",{className:"border-l-2 pl-3 text-sm",children:[s.jsxs("p",{children:[s.jsxs("strong",{children:["Intervenção"," ",p+1,":"]})," ",f]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Função:"})," ",l.funcao]}),l.clavien_dindo&&l.clavien_dindo!=="none"&&s.jsxs("p",{children:[s.jsx("strong",{children:"Clavien-Dindo:"})," ",l.clavien_dindo]}),l.anatomia_patologica&&s.jsxs("p",{children:[s.jsx("strong",{children:"Anat. Patológica:"})," ",l.anatomia_patologica]}),l.observacoes&&s.jsxs("p",{children:[s.jsx("strong",{children:"Obs:"})," ",l.observacoes]})]},p)})})]},r)})})]})]})]}),e[98]=k,e[99]=h,e[100]=n,e[101]=a,e[102]=o,e[103]=w,e[104]=A,e[105]=P,e[106]=d,e[107]=B):B=e[107];let H;e[108]!==$||e[109]!==L||e[110]!==U||e[111]!==z||e[112]!==B?(H=s.jsxs("form",{children:[$,L,U,z,B]}),e[108]=$,e[109]=L,e[110]=U,e[111]=z,e[112]=B,e[113]=H):H=e[113];const rs=`flex items-center justify-between pt-6 ${m?"fixed right-0 bottom-0 left-0 z-50 border-t bg-background/80 p-4 backdrop-blur-md":""}`;let M;e[114]!==o?(M=()=>o>1?Je(o-1):us.visit("/registos-cirurgicos"),e[114]=o,e[115]=M):M=e[115];const ns=m?"mr-2 flex-1":"";let Me;e[116]===Symbol.for("react.memo_cache_sentinel")?(Me=s.jsx(Ts,{className:"mr-2 h-4 w-4"}),e[116]=Me):Me=e[116];const cs=o===1?"Cancelar":m?"Anterior":"Passo Anterior";let Q;e[117]!==M||e[118]!==ns||e[119]!==cs?(Q=s.jsxs(J,{type:"button",variant:"outline",onClick:M,className:ns,children:[Me,cs]}),e[117]=M,e[118]=ns,e[119]=cs,e[120]=Q):Q=e[120];let G;e[121]!==ts||e[122]!==ss||e[123]!==m||e[124]!==Pe||e[125]!==o?(G=o<5?s.jsxs(J,{type:"button",onClick:()=>Je(o+1),disabled:!ts(),className:m?"ml-2 flex-1":"",children:[m?"Próximo":"Próximo Passo",s.jsx(Cs,{className:"ml-2 h-4 w-4"})]}):s.jsxs(J,{type:"button",disabled:Pe,onClick:ss,className:`bg-emerald-600 hover:bg-emerald-700 ${m?"ml-2 flex-1":""}`,children:[s.jsx(Os,{className:"mr-2 h-4 w-4"}),Pe?"A guardar...":"Confirmar e Guardar"]}),e[121]=ts,e[122]=ss,e[123]=m,e[124]=Pe,e[125]=o,e[126]=G):G=e[126];let q;e[127]!==rs||e[128]!==Q||e[129]!==G?(q=s.jsxs("div",{className:rs,children:[Q,G]}),e[127]=rs,e[128]=Q,e[129]=G,e[130]=q):q=e[130];let I;e[131]!==m?(I=m&&s.jsx("div",{className:"h-20"}),e[131]=m,e[132]=I):I=e[132];let Qe;return e[133]!==is||e[134]!==V||e[135]!==E||e[136]!==H||e[137]!==q||e[138]!==I?(Qe=s.jsxs(ws,{breadcrumbs:Vs,children:[He,s.jsxs("div",{className:is,children:[V,E,H,q,I," "]})]}),e[133]=is,e[134]=V,e[135]=E,e[136]=H,e[137]=q,e[138]=I,e[139]=Qe):Qe=e[139],Qe}function Es(i){return s.jsx(g,{value:i,children:i},i)}function $s(i){return s.jsx(g,{value:i.id.toString(),children:i.nome},i.id)}function Ls(i){return s.jsx(g,{value:i.id.toString(),children:i.nome},i.id)}function Us(i){return s.jsx(g,{value:i.id.toString(),children:i.nome},i.id)}function zs(i){return s.jsx(g,{value:i.id.toString(),children:i.nome},i.id)}function Bs(i){return s.jsx(g,{value:i.nome,children:i.nome},i.id)}function Hs(i){return s.jsx(g,{value:i.nome,children:i.nome},i.id)}function Ms(i){return s.jsx(g,{value:i,children:i},i)}function Qs(i){return i.procedimentos.every(Gs)}function Gs(i){return i.procedimento_id&&i.funcao}function qs(i){return i.diagnostico_id}function Is(i){qe.error("Erro ao criar registo cirúrgico. Verifique os dados."),console.error("=== VALIDATION ERRORS ===",i)}function Js(){qe.success("Registo cirúrgico criado com sucesso!")}function Ks(i){return{diagnostico_id:parseInt(i.diagnostico_id),tipo:i.tipo||null,procedimentos:i.procedimentos.map(Ws)}}function Ws(i){return{procedimento_id:parseInt(i.procedimento_id),funcao:i.funcao,clavien_dindo:i.clavien_dindo||null,anatomia_patologica:i.anatomia_patologica||null,observacoes:i.observacoes||null}}function Xs(i){return{value:i.id.toString(),label:i.nome}}function Ys(i){return i.id.toString()}function Zs(i){return i.id.toString()}export{Vt as default};
